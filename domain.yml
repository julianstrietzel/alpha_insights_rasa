version: "3.1"

intents:
  - greet
  - goodbye
  - confirm
  - bot_challenge
  - blood_pressure_last_recorded
  - user_nickname
  - provide_user_id
  - basic_user_details
  - blood_pressure_trends_three_months
  - blood_pressure_time_of_day
  - critical_blood_pressure_alerts
  - location_specific_blood_pressure
  - blood_pressure_home_vs_other
  - user_medical_preconditions
  - blood_pressure_trend_changed_since_date
  - high_blood_pressure_readings
  - ask_gpt


responses:
  utter_greet:
    - condition:
        - type: slot
          name: user_id
          value: "-1"
      text: "Hey! Please provide the user ID of your patient."
    - text: "Hey! I am a health assistant. How can I help you today?"

  utter_goodbye:
    - text: "Bye"

  utter_bot_challenge:
    - text: "I am a bot. I can help you to get deeper insights into the user data provided. What do you want me to look into?"


  utter_ask_user_id:
    - text: "Please provide the user ID"
    - text: "What is the user ID?"
    - text: "Can you tell me the user ID of the patient of concern?"

  utter_inform_gpt_interaction:
    - text: "We will use gpt to answer this question..."

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true

entities:
  - user_id
  - type
  - direction
  - limit
  - date
  - location
  - timespan
  - number

slots:
  user_id:
    type: text
    initial_value: "-1"
    mappings:
    - type: from_entity
      entity: user_id
      intent: provide_user_id
    - type: custom

  gpt_confirmed:
    type: bool
    initial_value: false
    influence_conversation: true
    mappings:
    - type: custom

  nickname:
      type: text
      mappings:
        - type: custom
  title:
      type: text
      mappings:
        - type: custom
  geo:
      type: text
      mappings:
        - type: custom
  health:
      type: text
      mappings:
        - type: custom
  home_longitude:
      type: text
      mappings:
        - type: custom
  home_latitude:
      type: text
      mappings:
        - type: custom
  birthday:
      type: text
      mappings:
        - type: custom
  sex:
      type: text
      mappings:
        - type: custom
  medical_preconditions:
      type: text
      mappings:
        - type: custom
  change_date:
        type: text
        mappings:
            - type: from_entity
              entity: date
              intent: blood_pressure_trend_changed_since_date
            - type: custom

actions:
  - utter_greet
  - utter_goodbye
  - utter_ask_user_id
  - action_respond_to_greeting
  - action_get_most_recent_blood_pressure
  - action_get_basic_user_details
  - action_get_user_nickname
  - action_get_blood_pressure_trends_three_months
  - action_check_high_systolic_readings
  - action_check_blood_pressure_time_of_day
  - action_critical_blood_pressure_alerts
  - action_get_location_specific_blood_pressure
  - action_blood_pressure_home_vs_other
  - action_get_user_medical_preconditions
  - action_blood_pressure_trend_changed_since_date
  - action_high_blood_pressure_readings
  - action_ask_gpt
  - action_set_gpt_confirmed
  - action_ask_gpt_once

